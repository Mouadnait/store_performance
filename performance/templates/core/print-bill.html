{% extends 'base.html' %}
{% load static %}

{% block style-content %}
{% endblock style-content %}

{% block title %}Print Bill #{{ bill.id }} | Store Performance{% endblock title %}

{% block content-title %}Print Bill{% endblock content-title %}

{% block content %}
<div class="print-container">
    
    <div class="invoice-header">
        <h1>Invoice #{{ bill.id }}</h1>
        <p>{{ bill.date|date:"F d, Y" }}</p>
    </div>

    <div class="bill-details">
        <div class="detail-section">
            <h3>Bill To:</h3>
            <p><strong>{{ client.full_name }}</strong></p>
            {% if client.email %}<p>{{ client.email }}</p>{% endif %}
            {% if client.phone %}<p>{{ client.phone }}</p>{% endif %}
            {% if client.address %}<p>{{ client.address }}</p>{% endif %}
        </div>
        <div class="detail-section">
            <h3>From:</h3>
            <p><strong>{{ bill.store_name }}</strong></p>
            <p>{{ bill.date|date:"F d, Y" }}</p>
        </div>
    </div>

    <table class="items-table">
        <thead>
            <tr>
                <th>Description</th>
                <th style="text-align: right;">Qty</th>
                <th style="text-align: right;">Unit Price</th>
                <th style="text-align: right;">Amount</th>
            </tr>
        </thead>
        <tbody>
            {% if bill.items.all %}
                {% for item in bill.items.all %}
                <tr>
                    <td>{{ item.description }}</td>
                    <td style="text-align: right;">{{ item.quantity|floatformat:2 }}</td>
                    <td style="text-align: right;">${{ item.price|floatformat:2 }}</td>
                    <td style="text-align: right;">${{ item.amount|floatformat:2 }}</td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td>{{ bill.description }}</td>
                    <td style="text-align: right;">{{ bill.quantity }}</td>
                    <td style="text-align: right;">${{ bill.price|floatformat:2 }}</td>
                    <td style="text-align: right;">${{ bill.amount|floatformat:2 }}</td>
                </tr>
            {% endif %}
        </tbody>
    </table>

    <div class="summary">
        <div></div>
        <div class="summary-right">
            <div class="summary-row">
                <span>Subtotal:</span>
                <span>${{ bill.total_amount|floatformat:2 }}</span>
            </div>
            <div class="summary-row total">
                <span>Total:</span>
                <span>${{ bill.total_price|floatformat:2 }}</span>
            </div>
        </div>
    </div>

    <div class="print-button">
        <button onclick="window.print()">üñ®Ô∏è Print this Bill</button>
    </div>
    
    <!-- Footer -->
    <div style="margin-top: 40px; padding-top: 20px; border-top: 2px solid #e9ecef; text-align: center; color: #6c757d;">
        <p style="margin: 0; font-size: 0.9em;">Thank you for your business!</p>
    </div>
</div>
{% endblock content %}
